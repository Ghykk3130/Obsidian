# Convective derivative

对于任意一个场$\phi(\vec{r},t)$（此处既可以是标量场也可以是矢量场），它的全导数和偏导数有如下物理意义：
1) 考虑$\frac{\partial \phi}{\partial t}|_{\vec{r}=\vec{r_{0}},t=t_{0}}$。这相当于我们站在$\vec{r_{0}}$处，记录在$t_{0}$时刻$\phi$随时间演化产生瞬时的变化。
2) 若我们考虑一条轨迹$\vec{r}(t)$，于是$\phi=\phi(\vec{r}(t),t)$。考虑$\frac{d\phi}{dt}|_{t=t_{0}}= \frac{\partial \phi}{\partial t}+\vec{v}\cdot\nabla \phi$ 。这相当于我们允许$t$变化，然后$\vec{r}$也随$t$变化而变化，然后记录下$\phi$产生的瞬时变化。这就相当于我们随着$\vec{r}(t)$移动，然后观察$\phi$的变化。
于是作如下定义：
>[!Definition 1]
>If $\phi(\vec{r},t)$ is a field, $\vec{r}=\vec{r}(t)$, then define the convective derivative: $\frac{d\phi}{dt}=\frac{\partial \phi}{\partial t}+\vec{v}\cdot \nabla \phi$

# 自由电荷与自由电流

应当想象自由电荷附着在一个个小质点上，随着物质的移动而移动。自由电荷在这些质点上的“分布”不会改变，永远紧贴在这些质点上。我们假设这些物质不会被压缩，所以自由电荷速度无散。

>[! Proposition 1]
>Let $v$ be the velocity of a free charge. Then $\nabla \cdot \vec{v}=0$
## Proof.
自由电荷的速度就是这些小质点的速度。令$\vec{J_{m}}$为物质流，$\rho_{m}$为物质密度。于是物质流守恒给出：
$\nabla \cdot \vec{J_{m}}=-\frac{\partial \rho_{m}}{\partial t}$
$$\begin{align}
\implies & \nabla \cdot(\rho_{m}\vec{v})=- \frac{\partial \rho_{m} }{\partial t} \\  & \vec{v}\cdot \nabla \rho_{m}+\rho_{m}\nabla \cdot \vec{v}=- \frac{\partial \rho_{m}}{\partial t}
 
\end{align}$$
OTOH，因为我们随着$\rho_{m}$一起运动，观察$\rho_{m}$，而物质不可压缩，所以$\rho_{m}$不变。所以$\rho_{m}$的convective derivative一定为零，即
$0= \frac{d\rho_{m}}{dt}=\frac{\partial \rho_{m}}{\partial t}+\vec{v}\cdot \nabla \rho_{m}$

带入到流守恒得到的式子就得到$\rho_{m}\nabla \cdot \vec{v}=0 \implies \nabla \cdot \vec{v}=0$
>[!Right]
>$\blacksquare$

我们知道有两种由电荷得到电流的方式：
1) 知道电荷密度$\rho$以及$\rho$的速度$\vec{v}$，可以得到$\vec{J}=\rho \vec{v}$。
2) 知道$\rho$的导数，并且知道电流由流守恒给电荷造成变化，于是$\nabla \cdot \vec{J}=- \frac{\partial \rho}{\partial t}$。我们直接把nabla算子左手边作用对象提出来当做电流。但是这种方式具有ambiguity，我们可以随意往$\vec{J}$上某函数的旋度。

所以这两种得到电流的方式可能有矛盾。
我们先证明对于自由电流，自由电荷，这没有矛盾。即将$\vec{J_{f}}=\rho_{f} \vec{v}$代入$\nabla \cdot \vec{J_{f}}=- \frac{\partial \rho_{f}}{\partial t}$等式成立。
$$\begin{align}
\nabla \cdot \vec{J_{f}} & =\nabla \cdot(\rho_{f} \vec{v}) \\
 & =\rho_{f} \nabla \cdot \vec{v}+\vec{v}\cdot \nabla \rho_{f} \\
 & =\vec{v}\cdot \nabla \rho_{f} \\
 & = \frac{d\vec{r}}{dt} \cdot \frac{\partial\rho_{f}}{\partial \vec{r}} \\
 & = \frac{\partial \rho_{f}}{\partial t}
\end{align}$$
# 电极化电荷与电极化电流

^cb56dc

对于极化电荷，有矛盾。考虑一种特殊情形。考虑一个电偶极密度$\vec{P}$。设$\vec{P}$的大小，方向不随时间变化。$\vec{P}$以$\vec{v}$运动。于是：
$\vec{J_{p}}=-\vec{v}\nabla \cdot \vec{P}$

然而我们由流守恒naive地得到的$\vec{J_{p}}$为$\frac{\partial \vec{P}}{\partial t}$。稍作变换：
$$\begin{align}
\vec{J_{p}} & = \frac{\partial \vec{P}}{\partial t} \\
 & =-\vec{v}\cdot \nabla \vec{P}
\end{align}$$
## Caveat
我们不能直接trivial地得到$\frac{\partial \vec{P}}{\partial t}=\frac{\partial \vec{P}}{\partial \vec{r}}\cdot \frac{\partial \vec{r}}{\partial t}=\vec{v}\cdot \nabla \vec{P}$。此处在求$\frac{\partial \vec{P}}{\partial t}$时，变量的dependence十分复杂。我们有$\vec{P}=\vec{P}(\vec{r}-\vec{r_{0}})$，其中$\vec{r_{0}}$是轨迹。这是因为在全空间任意一点$\vec{r}$，只有当$\vec{r}$和$\vec{r_{0}}$吻合时才有非零的电偶极密度。没有时间的explicit dependence是因为$\vec{P}$的大小方向不随时间变化。然后时间的dependence在$\vec{r_{0}}$里面，于是就可以算出负号。另一种简单的思路是：我唯一知道的是$\frac{d\vec{P}}{dt}=0$ 。这是由convctive derivative和total derivative的物理意义得到的。于是$\frac{d\vec{P}}{dt}=\frac{\partial \vec{P}}{\partial t}+\vec{v}\cdot \nabla \vec{P}=0$。

这两个$\vec{J_{p}}$不相等。
因为流守恒得到电流的方法具有ambiguity，所以流守恒得到的电流应当更一般地写作$\frac{\partial \vec{P}}{\partial t}+\nabla \times \vec{M_{p}}$。
于是：$\nabla \times \vec{M_{p}}=\vec{v}\cdot \nabla \vec{P}-\vec{v}\nabla \cdot \vec{P}=\nabla \times (\vec{P}\times \vec{v})$

我们不妨取$\vec{M_{p}}=\vec{P}\times \vec{v}$

## Remark
$\vec{M_{p}}$在物理意义上是一个磁偶极密度。
在加上$\vec{M_{p}}$的修正后，完整的总电流应当是：$\vec{J_{f}}+ \frac{\partial \vec{P}}{\partial t}+\nabla \times \vec{M_{p}}+\nabla \times \vec{M}+\epsilon_{0} \frac{\partial \vec{E}}{\partial t}$ 
我们将两个旋度合写为$\nabla \times(\vec{M_{p}}+\vec{M})$。于是$\vec{M_{p}}$物理上就等效于一个磁偶极密度。

在静止状态下，我们只看到极化电荷。当极化电荷运动时，我们在lab frame中得到电流。产生这些电流的等效磁偶极密度就是$\vec{M_{p}}$。  

我们发现，热力学第一定律似乎和经典力学+电磁学有矛盾。考虑一个系统。系统能量为$U$。热力学第一定律表明：
$$dU=\delta Q+\delta W$$
但是任何系统都可以reduce为一个力学+电磁系统。即一些粒子在电磁场中运动。对这个系统做功。我们将系统+做功的系统看做一个isolated的整体。这个整体的Hamiltonian为：
$$H=U+H_{ext}+U_{int}$$
其中$H_{ext}$为做功的系统isolated时的Hamiltonian。$U_{int}$为interaction term。显然，系统受到的功为：
$$\delta W= -\frac{\partial H}{\partial \vec{r}_{i}}\cdot d\vec{r}_{i} $$